<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
       <ul class="display"></ul>
    <script>
      //API Endpoint | fetch -> Promise

      // Task 1
      //   fetch(
      //     "https://restcountries.com/v3.1/all?fields=name,flags,region,population,capital"
      //   )
      //     .then((res) => res.json())
      //     .then((data) => data.map((dt) => dt.name.common))
      //     .then((country) => console.log(country));

      // Task 1.2 🌍
      // Print names of countries with population more than 10,000,000 (1 crore)
      // Sort them in descending order of population
      // Output format: ["India", "China", "Russia", ...]

      fetch(
        "https://restcountries.com/v3.1/all?fields=name,flags,region,population,capital"
      )
        // .then((res) => res.json())
        // .then((countries) =>
        //   countries
        //     .filter((country) => country.population >= 10000000)
        //     .sort((a, b) => b.population - a.population)
        //     .map((countryName) => countryName.name.common)
        // )
        // .then((result) =>
        //   console.log(result)
        // );
        // Task 3
        //Print countries with population more than 10,000,000
        // Output format:
        // 1. India - 150000000
        // 2. China - 120000000
        // 3. Russia - 80000000
        
        // .then((res) => res.json())
        // .then((countries) =>
        //   countries
        //     .filter((country) => country.population >= 10000000)
        //     .sort((a, b) => b.population - a.population)
        //     .map((countryName,index) => (`${index+1}. ${countryName.name.common} - ${countryName.population}`))
        // )
        //     .then((result) => console.log(result.join("\n")));
            

          // Task 1.4 🔟
      // Get the top 10 most populated countries in descending order
      // Output format similar to Task 1.3
    //    const display = document.querySelector(".display");     

          .then((res) => res.json())
        .then((countries) =>
          countries
            .filter((country) => country.population >= 10000000)
            .sort((a, b) => b.population - a.population)
            .map((countryName,index) => (`${index+1}. ${countryName.name.common} - ${countryName.population}`)).slice(0,10)
        )
            .then((result) => document.querySelector(".display").
            innerHTML = <li>result</li>);
            // .then((result) => result.forEach()));
    </script>
  </body>
</html>
