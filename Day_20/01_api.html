<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body{
        background-color:whitesmoke;
        max-width: 1000px;
        margin: 0 auto;
        display: grid;
        place-content: center;
      }
      .country-main-container {
        display: flex;
        flex-wrap: wrap;
        gap: 50px;
        justify-content:space-around ; 
        .main {
          background-color: white;
          width: 300px;
          /* height: 310px; */
          display: grid;
          border-radius: 15px;
          img{
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
          }
        }
        .country-content {
          padding: 5px;
        }
      }
    </style>
  </head>
  <body>
    <div class="country-main-container"></div>

    <script>
      //API Endpoint | fetch -> Promise

      // Task 1
      //   fetch(
      //     "https://restcountries.com/v3.1/all?fields=name,flags,region,population,capital"
      //   )
      //     .then((res) => res.json())
      //     .then((data) => data.map((dt) => dt.name.common))
      //     .then((country) => console.log(country));

      // Task 1.2 🌍
      // Print names of countries with population more than 10,000,000 (1 crore)
      // Sort them in descending order of population
      // Output format: ["India", "China", "Russia", ...]

      fetch(
        "https://restcountries.com/v3.1/all?fields=name,flags,region,population,capital"
      );
      // .then((res) => res.json())
      // .then((countries) =>
      //   countries
      //     .filter((country) => country.population >= 10000000)
      //     .sort((a, b) => b.population - a.population)
      //     .map((countryName) => countryName.name.common)
      // )
      // .then((result) =>
      //   console.log(result)
      // );
      // Task 3
      //Print countries with population more than 10,000,000
      // Output format:
      // 1. India - 150000000
      // 2. China - 120000000
      // 3. Russia - 80000000

      // .then((res) => res.json())
      // .then((countries) =>
      //   countries
      //     .filter((country) => country.population >= 10000000)
      //     .sort((a, b) => b.population - a.population)
      //     .map((countryName,index) => (`${index+1}. ${countryName.name.common} - ${countryName.population}`))
      // )
      //     .then((result) => console.log(result.join("\n")));

      // Task 1.4 🔟
      // Get the top 10 most populated countries in descending order
      // Output format similar to Task 1.3
      //    const display = document.querySelector(".display");

      //   .then((res) => res.json())
      // .then((countries) =>
      //   countries
      //     .filter((country) => country.population >= 10000000)
      //     .sort((a, b) => b.population - a.population)
      //     .map((countryName,index) => (`${index+1}. ${countryName.name.common} - ${countryName.population}`)).slice(0,10)
      // )
      //     .then((result) => document.querySelector(".display").
      //     innerHTML = <li>result</li>);
      // .then((result) => result.forEach()));

      // Task 1.5 📋
      // Display the Top 10 most populated countries on the screen as a list
      // Each list item should show: <Country Name> - <Population>

      // .then((res) => res.json())
      // .then((countries) =>{
      //   const result = countries
      //     .filter((country) => country.population >= 10000000)
      //     .sort((a, b) => b.population - a.population)
      //     .map((countryName) =>
      //         `<li> ${countryName.name.common} - ${countryName.population}</li>`).slice(0, 10)
      //         document.querySelector(".display").innerHTML =
      //           result.join(" ")
      // });

      // Task 1.6 🌐
      // Display all 250 countries on the screen with the following details:

      function createCountry() {
        fetch(
          "https://restcountries.com/v3.1/all?fields=name,flags,region,population,capital"
        )
          .then((res) => res.json())
          .then((countries) => {
            for (let country of countries) {
              const result = document.querySelector(".country-main-container");
              result.innerHTML += `
              <div class="main">
              <img src="${country.flags.png ?? country.flags.svg}" />
              
         <div class="country-content"> 
          <h3> ${country.name.common}</h3>
          <p> <span>Population: </span>${country.population}</p>
          <p><span>Capital: </span>${country.capital}</p>
          <p><span>Region: </span>${country.region}</p>
          </div> 
          </div> `;
            }
          });
      }
      createCountry();
    </script>
  </body>
</html>
